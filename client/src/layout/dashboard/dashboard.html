<div *ngIf="driverService.currentDriver() as driver" class="bg-base-300 flex flex-col">
  <!-- Header -->
  <header class="bg-base-100 shadow p-4 flex items-center justify-between">
    <h1 class="text-2xl font-bold text-blue-600">EV Charging Dashboard</h1>
    <div class="flex items-center gap-3">
      <img src="assets/logo.png" alt="Avatar" class="w-10 h-10 rounded-full" />
      <div>
        <p class="font-medium">{{ driver.fullName }}</p>
        <p class="text-sm text-gray-500">{{ driver.email }}</p>
      </div>
    </div>
  </header>

  <!-- Main content -->
  <main class="flex-1 p-6 grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- Bản đồ -->
    <section class="bg-base-100 shadow rounded-2xl p-6 col-span-1 md:col-span-2">
      <div class="bg-base-100 rounded-lg overflow-hidden relative">
        <app-gg-map class="absolute inset-0"></app-gg-map>
      </div>
    </section>

    <!-- Phương tiện -->
    <section class="bg-base-100 shadow rounded-2xl p-6 col-span-1 lg:col-span-1 pt-10">
      <h2 class="flex items-center text-xl font-semibold mb-6 text-gray-800 pb-10">
        <span class="text-base-content">Phương tiện hiện tại</span>
      </h2>
      <app-vehicle></app-vehicle>
    </section>

    <!-- Lịch sử sạc -->
    <section class="bg-base-100 shadow rounded-2xl p-6 col-span-1 lg:col-span-2">
      <h2 class="text-xl font-semibold mb-3 text-base-content flex items-center gap-2">
        <i class="fa-solid fa-clock-rotate-left text-green-600"></i> Lịch sử sạc
      </h2>
      <table class="wx-full text-left border-collapse">
        <thead class="bg-base-100 text-base-700 font-semibold">
          <tr>
            <th class="py-2 px-3">Ngày</th>
            <th class="py-2 px-3">Địa điểm</th>
            <th class="py-2 px-3">Thời gian</th>
            <th class="py-2 px-3">Số tiền</th>
          </tr>
        </thead>
        <tbody>
          <!-- Ví dụ: -->
          <!-- <tr *ngFor="let item of chargeHistory" class="border-t hover:bg-gray-50">
              <td class="py-2 px-3">{{ item.date | date:'short' }}</td>
              <td class="py-2 px-3">{{ item.location }}</td>
              <td class="py-2 px-3">{{ item.duration }} phút</td>
              <td class="py-2 px-3">{{ item.cost | currency:'VND' }}</td>
          </tr> -->
        </tbody>
      </table>
    </section>

    <!-- Gói cước hiện tại -->
   <section class="bg-base-100 shadow rounded-2xl p-6">
  <h2 class="text-xl font-semibold mb-3 text-base-700">Danh sách gói của bạn</h2>

  <div *ngIf="driverPackage.length > 0; else noPackage">
    <div
      *ngFor="let pack of driverPackage"
      class="bg-base-100 rounded-xl p-4 mb-4 border border-blue-200"
    >
      <!-- Header -->
      <div class="flex justify-between items-center">
        <p class="text-lg font-bold text-blue-700">{{ pack.packageName }}</p>

        <!-- Badge -->
        <span
          class="px-3 py-1 text-sm font-semibold rounded-full"
          [ngClass]="pack.isActive ? 'bg-green-100 text-green-700' : 'bg-gray-200 text-gray-600'"
        >
          {{ pack.isActive ? 'Đang hoạt động' : 'Đã hết hạn' }}
        </span>
      </div>
      <!-- Loại xe -->
      <p class="text-gray-600 mt-1">Loại xe: {{ pack.vehicleType }}</p>

      <!-- ✅ Số ngày còn lại -->
      <p class="text-gray-600 mt-1">
        Còn lại:
        <span class="font-semibold text-blue-600">
          {{ getRemainingDays(pack.endDate) }} ngày
        </span>
      </p>

      <button
        class="mt-3 bg-blue-600 text-white px-4 py-2 rounded-full hover:bg-blue-700 transition"
      >
        Gia hạn gói
      </button>
    </div>
  </div>

  <ng-template #noPackage>
    <p class="text-gray-500">Hiện bạn chưa đăng ký gói nào.</p>
  </ng-template>
</section>



  </main>
</div>
