<div class="flex justify-center items-center min-h-screen bg-transparent relative font-sans">
  <!-- L·ªöP N·ªÄN M·ªú -->
  <div
    class="absolute inset-0 bg-cover bg-center brightness-50 blur-sm"
    style="background-image: url('/assets/background/nen-tram-sac-xe-dien.png');">
  </div>

  <!-- KHUNG CH√çNH -->
  <div class="relative bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl p-8 w-[420px] text-center z-10 border border-gray-200">


    <div *ngIf="isReturn; else topUpForm" class="flex flex-col items-center justify-center min-h-[320px]">
      <div class="animate-fade-in">
        <p class="text-lg text-gray-700 font-medium mb-3">{{ message }}</p>

        <div *ngIf="isSuccess" class="mt-3 text-green-600 font-semibold flex flex-col items-center">
          <i class="fa-solid fa-circle-check text-green-500 text-5xl mb-2"></i>
          <p>Giao d·ªãch th√†nh c√¥ng </p>
          <p class="text-gray-500 text-sm mt-1">C·∫£m ∆°n b·∫°n ƒë√£ n·∫°p ti·ªÅn qua VNPay</p>
          <button
            routerLink="/"
            class="mt-6 bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg font-medium shadow transition">
            Trang Ch·ªß
          </button>
        </div>

      </div>
    </div>

    <!-- ‚úÖ FORM N·∫†P TI·ªÄN -->
    <ng-template #topUpForm>
      <h2 class="text-2xl font-bold text-blue-700 flex items-center justify-center gap-2 mb-4">
        <i class="fa-solid fa-wallet text-blue-500 text-3xl"></i> N·∫°p ti·ªÅn VNPay
      </h2>

      <!-- Th√¥ng tin ng∆∞·ªùi d√πng -->
      <p class="text-gray-500 mb-1">Ng∆∞·ªùi d√πng:</p>
      <p class="text-orange-500 font-semibold mb-4">
        {{ driverService.currentDriver()?.fullName || 'Ch∆∞a ƒëƒÉng nh·∫≠p' }}
      </p>

      <!-- C√°c n√∫t ch·ªçn m·ªánh gi√° -->
      <div class="grid grid-cols-2 gap-3 mb-4">
        <button
          *ngFor="let val of [100000,200000,500000,1000000]"
          (click)="selectAmount(val)"
          [class.bg-blue-500]="amount === val"
          [class.text-white]="amount === val"
          [class.border-blue-600]="amount === val"
          class="py-2 rounded-lg border border-blue-400 bg-blue-50 text-gray-700 font-medium hover:bg-blue-500 hover:text-white transition-all duration-200 shadow-sm">
          {{ val | number }} ‚Ç´
        </button>
      </div>

      <!-- √î nh·∫≠p s·ªë ti·ªÅn -->
      <div class="relative mb-4 flex items-center">
        <input
          type="text"
          [(ngModel)]="amount"
       
          appCurrencyFormat
          placeholder="Nh·∫≠p s·ªë ti·ªÅn..."
          class="w-full border-2 border-blue-400 rounded-xl py-2 pl-10 pr-10 text-lg text-gray-800 text-center focus:ring-4 focus:ring-blue-200 outline-none transition-all peer" />
        <i class="fa-solid fa-money-bill absolute left-3 text-blue-500"></i>
        <span class="absolute right-4 text-gray-500 font-semibold text-lg select-none peer-focus:text-blue-500">‚Ç´</span>
      </div>
      <div *ngIf="message" class="flex items-center justify-center gap-2 mb-3 animate-fade-in">
  <i class="fa-solid fa-circle-exclamation text-red-500 text-lg"></i>
  <p class="text-red-500 font-medium text-sm">{{ message }}</p>
</div>

      <!-- N√∫t thanh to√°n -->
      <button
        (click)="Topup()"
        class="w-full bg-gradient-to-r from-blue-600 to-cyan-400 text-white py-3 rounded-xl font-semibold shadow-md hover:scale-[1.02] transition-all">
        <i class="fa-brands fa-cc-visa text-xl mr-1"></i>
        Thanh to√°n qua VNPay
      </button>

      <p class="text-gray-400 text-xs mt-5 italic">
        B·∫£o m·∫≠t b·ªüi <span class="text-blue-500 font-semibold">VNPay</span> üîí
      </p>
    </ng-template>
  </div>
</div>
