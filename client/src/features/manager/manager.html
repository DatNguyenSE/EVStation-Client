<div class="max-w-6xl mx-auto mt-20 mb-16 min-h-screen space-y-8">

  <!-- ================== BOX 1: TH√îNG TIN TR·∫†M & TH·ªêNG K√ä ================== -->
  <div class="bg-white rounded-2xl shadow-md p-6">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-lg font-semibold text-gray-800">
        Th√¥ng tin tr·∫°m & Th·ªëng k√™
      </h3>

      <!-- üîÑ N√∫t t·∫£i l·∫°i -->
      <button
        (click)="reloadData()"
        class="flex items-center gap-2 px-3 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-sm transition active:scale-95"
      >
        <i class="fa-solid fa-rotate-right"></i>
        T·∫£i l·∫°i
      </button>
    </div>

    <div *ngIf="isLoading()">ƒêang t·∫£i d·ªØ li·ªáu...</div>
    <div *ngIf="error()" class="text-red-600">{{ error() }}</div>

    <ng-container *ngIf="!isLoading() && !error()">
      <div class="text-gray-700 space-y-1 mb-6">
        <p><span class="font-medium">T√™n tr·∫°m:</span> {{ StationInfo()?.name }}</p>
        <p><span class="font-medium">ƒê·ªãa ch·ªâ:</span> {{ StationInfo()?.address }}</p>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3">
        <div class="bg-blue-50 text-blue-900 px-4 py-2 rounded-xl shadow-sm">
          T·ªïng s·ªë tr·ª•: <span class="font-bold">{{ totalPosts() }}</span>
        </div>

        <div class="bg-green-50 text-green-900 px-4 py-2 rounded-xl shadow-sm">
          S·∫µn s√†ng: <span class="font-bold">{{ availablePosts() }}</span>
        </div>

        <div class="bg-yellow-50 text-yellow-900 px-4 py-2 rounded-xl shadow-sm">
          ƒêang c√≥ xe: <span class="font-bold">{{ occupiedPosts() }}</span>
        </div>

        <div class="bg-orange-50 text-orange-900 px-4 py-2 rounded-xl shadow-sm">
          B·∫£o tr√¨: <span class="font-bold">{{ maintenancePosts() }}</span>
        </div>
      </div>
    </ng-container>
  </div>

  <!-- ================== BOX 2: DOANH THU ================== -->
  <div class="bg-white rounded-2xl shadow-md p-6">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-lg font-semibold text-gray-800">Doanh thu th√°ng</h3>
    </div>
   
    <div *ngIf="revenues().length > 0; else noData">
      <table class="min-w-full border border-gray-200 rounded-lg text-sm">
        <thead class="bg-gray-100 text-gray-700">
          <tr>
            <th class="px-5 py-3 border-b text-left">Th√°ng</th>
            <th class="px-5 py-3 border-b text-right">Doanh thu (VNƒê)</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let r of revenues()" class="border-b hover:bg-gray-50">
            <td class="px-5 py-3">{{ r.period }}</td>
            <td class="px-5 py-3 text-right">{{ r.totalRevenue | number }}</td>
          </tr>
        </tbody>
      </table>
      <div class="text-right font-semibold text-gray-800 mt-3">
        T·ªïng c·ªông: {{ totalRevenue() | number }} VNƒê
      </div>
    </div>

    <ng-template #noData>
      <p class="text-gray-500 italic">Ch∆∞a c√≥ d·ªØ li·ªáu doanh thu.</p>
    </ng-template>
  </div>

  <!-- ================== BOX 3: DANH S√ÅCH C√ÅC TR·ª§ ================== -->
  <div class="bg-white rounded-2xl shadow-md p-6">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-lg font-semibold text-gray-800">
        Chi ti·∫øt c√°c tr·ª• s·∫°c c·ªßa {{ StationInfo()?.name }}
      </h3>
    </div>

    <div class="overflow-x-auto border border-gray-200 rounded-xl">
      <table class="min-w-full text-sm text-gray-700">
        <thead class="bg-gray-100 text-gray-700">
          <tr>
            <th class="px-5 py-3 border-b text-left font-semibold">M√£ tr·ª•</th>
            <th class="px-5 py-3 border-b text-left font-semibold">Lo·∫°i</th>
            <th class="px-5 py-3 border-b text-left font-semibold">C√¥ng su·∫•t</th>
            <th class="px-5 py-3 border-b text-center font-semibold">Tr·∫°ng th√°i</th>
            <th class="px-5 py-3 border-b text-center font-semibold">Walk-in</th>
          </tr>
        </thead>

        <tbody>
          <tr
            *ngFor="let post of chargingPost()"
            class="border-b hover:bg-gray-50 transition"
          >
            <td class="px-5 py-3 font-medium text-gray-900">{{ post.code }}</td>
            <td class="px-5 py-3 text-gray-700">{{ post.type }}</td>
            <td class="px-5 py-3 text-gray-700">{{ post.powerKW }} <span class="text-gray-400">kW</span></td>
            <td class="px-5 py-3 text-center">
              <span
                class="inline-flex items-center justify-center min-w-[100px] px-3 py-1.5 rounded-full text-xs font-semibold tracking-wide border"
                [ngClass]="{
                  'bg-green-100 text-green-700 border-green-200': post.status === 'Available',
                  'bg-yellow-100 text-yellow-700 border-yellow-200': post.status === 'Occupied',
                  'bg-orange-100 text-orange-700 border-orange-200': post.status === 'Maintenance',
                  'bg-gray-100 text-gray-700 border-gray-200': post.status === 'Offline'
                }"
              >
                {{ post.status }}
              </span>
            </td>
            <td class="px-5 py-3 text-center">
              <input
                type="checkbox"
                [checked]="post.isWalkIn"
                disabled
                class="w-4 h-4 text-green-600 border-gray-300 rounded cursor-not-allowed bg-gray-100"
              />
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div *ngIf="chargingPost().length === 0" class="text-gray-500 italic mt-3 text-center">
      Kh√¥ng c√≥ tr·ª• s·∫°c n√†o ƒë∆∞·ª£c t√¨m th·∫•y.
    </div>
  </div>
</div>
