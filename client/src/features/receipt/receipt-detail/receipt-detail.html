<div class="max-w-4xl mx-auto px-4 py-10 pt-24 font-sans">
  <div *ngIf="isLoading" class="text-center text-gray-500 py-16">
    <i class="bi bi-arrow-repeat animate-spin text-blue-500 text-xl"></i>
    <p>Äang táº£i chi tiáº¿t...</p>
  </div>

  <div *ngIf="!isLoading && errorMessage" class="text-center text-red-500 py-16">
    {{ errorMessage }}
  </div>

  <div *ngIf="!isLoading && receipt" class="bg-white p-8 rounded-2xl shadow-md border border-gray-100">
    <!-- Header -->
    <div class="flex justify-between items-center mb-6">
      <div>
        <h2 class="text-2xl font-bold text-blue-700">BiÃªn lai #{{ receipt.id }}</h2>
        <p class="text-gray-500 text-sm">Táº¡o lÃºc {{ receipt.createAt | date: 'HH:mm:ss dd/MM/yyyy' }}</p>
      </div>

      <span
        class="px-3 py-1 rounded-full text-sm font-semibold"
        [ngClass]="{
          'bg-green-100 text-green-700': receipt.status === 'Paid',
          'bg-red-100 text-red-700': receipt.status === 'Refunded',
          'bg-gray-100 text-gray-700': receipt.status === 'Pending'
        }"
      >
        {{ receipt.status }}
      </span>
    </div>

    <!-- Main Info -->
    <div class="grid sm:grid-cols-2 gap-4 text-sm text-gray-700">
      <p><strong>ğŸ‘¤ NgÆ°á»i dÃ¹ng:</strong> {{ receipt.appUserName || 'N/A' }}</p>
      <p><strong>ğŸ’³ PhÆ°Æ¡ng thá»©c thanh toÃ¡n:</strong> {{ receipt.paymentMethod || '---' }}</p>
      <p><strong>ğŸ“¦ GÃ³i sáº¡c:</strong> {{ receipt.packageName || 'KhÃ´ng cÃ³' }}</p>
      <p><strong>ğŸ”‹ TiÃªu thá»¥ nÄƒng lÆ°á»£ng:</strong> {{ receipt.energyConsumed }} kWh</p>
      <p><strong>âš¡ GiÃ¡ Ä‘iá»‡n (snapshot):</strong> {{ receipt.pricePerKwhSnapshot | number }} â‚«/kWh</p>
      <p><strong>ğŸ·ï¸ Báº£ng giÃ¡:</strong> {{ receipt.pricingName }}</p>
    </div>

    <hr class="my-5" />

    <!-- Fee Info -->
    <div class="grid sm:grid-cols-2 gap-4 text-sm text-gray-700">
      <p>ğŸ’° PhÃ­ nÄƒng lÆ°á»£ng: {{ receipt.energyCost | number }} â‚«</p>
      <p>ğŸ•“ PhÃ­ chá»: {{ receipt.idleFee | number }} â‚«</p>
      <p>â±ï¸ PhÃ­ quÃ¡ giá»: {{ receipt.overstayFee | number }} â‚«</p>
      <p>ğŸ’¸ Giáº£m giÃ¡: -{{ receipt.discountAmount | number }} â‚«</p>
    </div>

    <div class="mt-5 flex justify-between items-center">
      <h3 class="text-lg font-semibold text-gray-800">Tá»•ng thanh toÃ¡n</h3>
      <p class="text-xl font-bold text-blue-700">{{ receipt.totalCost | number }} â‚«</p>
    </div>

    <hr class="my-5" />

    <!-- Charging Sessions -->
    <div>
      <h3 class="text-lg font-semibold mb-2 text-gray-800">ğŸ”Œ CÃ¡c phiÃªn sáº¡c</h3>
      <ul class="list-disc pl-5 text-sm text-gray-700">
        <li *ngFor="let s of receipt.chargingSessions">
          Trá»¥ <strong>{{ s.chargingPostCode }}</strong> â€”
          {{ s.energyUsed }} kWh ({{ s.startTime | date: 'short' }} â†’ {{ s.endTime | date: 'short' }})
        </li>
      </ul>
    </div>

    <!-- Wallet Transactions -->
    <div class="mt-5">
      <h3 class="text-lg font-semibold mb-2 text-gray-800">ğŸ’° Giao dá»‹ch vÃ­ liÃªn quan</h3>
      <ul class="list-disc pl-5 text-sm text-gray-700">
        <li *ngFor="let t of receipt.walletTransactions">
          {{ t.transactionDate | date: 'short' }} â€“ <strong>{{ t.type }}</strong> â€“ 
          {{ t.amount | number }} â‚« ({{ t.description }})
        </li>
      </ul>
    </div>

    <!-- Footer -->
    <div class="mt-8 flex justify-end">
      <button class="btn btn-outline btn-sm" (click)="goBack()">
        â† Quay láº¡i danh sÃ¡ch
      </button>
    </div>
  </div>
</div>
