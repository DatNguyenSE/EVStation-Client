<div class="p-6 max-w-7xl mx-auto space-y-10">
  <!-- üü© BOX 1: Th√™m tr·∫°m m·ªõi (k√®m tr·ª•) -->
  <div class="bg-white shadow-lg rounded-2xl p-6 border border-gray-200">
    <h3 class="text-2xl font-semibold text-blue-700 mb-4 flex items-center gap-2">
      Th√™m tr·∫°m m·ªõi (k√®m tr·ª•)
    </h3>

    <!-- Th√¥ng tin tr·∫°m -->
    <div class="grid md:grid-cols-3 gap-4">
      <input type="text" [(ngModel)]="newStation.name" placeholder="T√™n tr·∫°m" class="input" />
      <input type="text" [(ngModel)]="newStation.address" placeholder="ƒê·ªãa ch·ªâ" class="input" />
      <input type="number" [(ngModel)]="newStation.latitude" placeholder="Vƒ© ƒë·ªô" class="input" />
      <input type="number" [(ngModel)]="newStation.longtitude" placeholder="Kinh ƒë·ªô" class="input" />
      <input type="time" [(ngModel)]="newStation.openTime" class="input" />
      <input type="time" [(ngModel)]="newStation.closeTime" class="input" />
    </div>

    <textarea
      [(ngModel)]="newStation.description"
      placeholder="M√¥ t·∫£ tr·∫°m..."
      class="w-full border border-gray-300 rounded-lg mt-4 p-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
    ></textarea>

    <!-- üß© Danh s√°ch tr·ª• -->
    <div class="mt-8">
      <div class="flex items-center justify-between mb-3">
        <h4 class="text-lg font-semibold text-gray-700">C·ªïng s·∫°c c·ªßa tr·∫°m m·ªõi</h4>
        <button (click)="addPostRow()" class="px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
          Th√™m c·ªïng s·∫°c
        </button>
      </div>

      <!-- Form th√™m tr·ª• -->
      <div class="flex flex-wrap items-center gap-3 mb-4">
        <select [(ngModel)]="newPost.type" class="input-small">
          <option value="" disabled selected>Lo·∫°i</option>
          <option value="Fast">Fast</option>
          <option value="Normal">Normal</option>
          <option value="Scooter">Scooter</option>
        </select>

        <select [(ngModel)]="newPost.connectorType" class="input-small">
          <option value="" disabled selected>Connector</option>
          <option value="1">VinEScooter</option>
          <option value="2">CSS2</option>
          <option value="3">Type2</option>
        </select>

        <input type="number" [(ngModel)]="newPost.powerKW" placeholder="C√¥ng su·∫•t (kW)" class="input-small" />

        <select [(ngModel)]="newPost.status" class="input-small">
          <option value="Available">Available</option>
          <option value="Occupied">Occupied</option>
          <option value="Maintenance">Maintenance</option>
          <option value="Offline">Offline</option>
        </select>

        <label class="flex items-center gap-1">
          <input type="checkbox" [(ngModel)]="newPost.isWalkIn" />
          Walk-in
        </label>
      </div>

      <!-- B·∫£ng tr·ª• trong UI -->
      <table class="min-w-full text-sm text-gray-600 border border-gray-200 rounded-lg overflow-hidden">
        <thead class="bg-blue-50">
          <tr>
            <th class="px-3 py-2 text-left">Lo·∫°i</th>
            <th class="px-3 py-2 text-left">Connector</th>
            <th class="px-3 py-2 text-left">C√¥ng su·∫•t (kW)</th>
            <th class="px-3 py-2 text-left">Tr·∫°ng th√°i</th>
            <th class="px-3 py-2 text-center">Walk-in</th>
            <th class="px-3 py-2 text-center">X√≥a</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let post of newStation.chargingPosts; let i = index" class="border-t">
            <td class="p-2">{{ post.type }}</td>
            <td class="p-2">{{ post.connectorType }}</td>
            <td class="p-2">{{ post.powerKW }}</td>
            <td class="p-2">{{ post.status }}</td>
            <td class="p-2 text-center"><input type="checkbox" [checked]="post.isWalkIn" disabled /></td>
            <td class="text-center">
              <button (click)="newStation.chargingPosts?.splice(i, 1)" class="text-red-600 hover:text-red-800">‚ùå</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- L∆∞u -->
    <div class="text-right mt-6">
      <button
        (click)="addStation()"
        class="px-5 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition">
        L∆∞u tr·∫°m (k√®m tr·ª•)
      </button>
    </div>
  </div>
 <!-- üü¶ BOX 2: Th√™m tr·ª• cho tr·∫°m hi·ªán c√≥ -->
<div class="bg-white shadow-lg rounded-2xl p-6 border border-gray-200 mt-10">
  <h3 class="text-2xl font-semibold text-blue-700 mb-4 flex items-center gap-2">
    Th√™m tr·ª• cho tr·∫°m hi·ªán c√≥
  </h3>

  <!-- Dropdown ch·ªçn tr·∫°m -->
  <div class="grid md:grid-cols-2 gap-4 mb-5">
    <div>
      <label class="block text-gray-700 font-medium mb-1">Ch·ªçn tr·∫°m s·∫°c</label>
      <select
        [(ngModel)]="selectedStation"
        class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400"
      >
        <option value="" selected>Ch·ªçn tr·∫°m c·∫ßn th√™m tr·ª•</option>
        <option *ngFor="let station of station" [ngValue]="station">
          {{ station.name }}
        </option>
      </select>
    </div>
  </div>

  <!-- Form th√™m tr·ª• -->
  <div *ngIf="selectedStation" class="grid md:grid-cols-6 gap-4 items-end">
    <!-- Lo·∫°i -->
    <div>
      <label class="block text-gray-700 font-medium mb-1">Lo·∫°i</label>
      <select
        [(ngModel)]="newPost.type"
        class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400"
      >
        <option value="" disabled selected>Ch·ªçn lo·∫°i</option>
        <option value="Fast">Fast</option>
        <option value="Normal">Normal</option>
         <option value="Scooter">Scooter</option>
      </select>
    </div>

    <!-- Connector -->
    <div>
      <label class="block text-gray-700 font-medium mb-1">Connector</label>
      <select
        [(ngModel)]="newPost.connectorType"
        class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400"
      >
        <option value="" disabled selected>Ch·ªçn connector</option>
        <option value="CCS2">CCS2</option>
        <option value="Type2">Type2</option>
        <option value="VinEScooter">VinEScooter</option>
      </select>
    </div>

    <!-- C√¥ng su·∫•t -->
    <div>
      <label class="block text-gray-700 font-medium mb-1">C√¥ng su·∫•t (kW)</label>
      <input
        [(ngModel)]="newPost.powerKW"
        type="number"
        placeholder="VD: 120"
        class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400"
      />
    </div>

    <!-- Tr·∫°ng th√°i -->
    <div>
      <label class="block text-gray-700 font-medium mb-1">Tr·∫°ng th√°i</label>
      <select
        [(ngModel)]="newPost.status"
        class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400"
      >
        <option value="Available">Available</option>
        <option value="Occupied">Occupied</option>
        <option value="Maintenance">Maintenance</option>
        <option value="Offline">Offline</option>
      </select>
    </div>

    <!-- Walk-in -->
    <div class="flex items-center gap-2 mt-6">
      <input [(ngModel)]="newPost.isWalkIn" type="checkbox" id="walkIn" class="h-4 w-4 text-blue-600" />
      <label for="walkIn" class="text-gray-700 font-medium">Walk-in</label>
    </div>

    <!-- N√∫t th√™m -->
    <div class="text-right mt-6">
      <button
        class="px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition"
        (click)="addPostToStations(selectedStation.id)"
      >
        Th√™m tr·ª•
      </button>
    </div>
  </div>
</div>

  <!-- üìã BOX 3: Danh s√°ch tr·∫°m hi·ªán c√≥ -->
  <div class="bg-white shadow-lg rounded-2xl p-6 border border-gray-200">
    <h3 class="text-2xl font-semibold text-blue-700 mb-4 flex items-center gap-2">Danh s√°ch tr·∫°m hi·ªán c√≥</h3>

    <table class="min-w-full text-sm text-gray-700 border border-gray-200 rounded-lg overflow-hidden">
      <thead class="bg-gray-100">
        <tr>
          <th class="px-3 py-2 text-left">M√£</th>
          <th class="px-3 py-2 text-left">T√™n</th>
          <th class="px-3 py-2 text-left">ƒê·ªãa ch·ªâ</th>
          <th class="px-3 py-2 text-center">Gi·ªù m·ªü</th>
          <th class="px-3 py-2 text-center">Gi·ªù ƒë√≥ng</th>
          <th class="px-3 py-2 text-center">Tr·∫°ng th√°i</th>
          <th class="px-3 py-2 text-center">S·ªë tr·ª•</th>
          <th class="px-3 py-2 text-center">H√†nh ƒë·ªông</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let s of station" class="border-t hover:bg-gray-50 transition">
          <td class="px-3 py-2">{{ s.code }}</td>
          <td class="px-3 py-2">{{ s.name }}</td>
          <td class="px-3 py-2">{{ s.address }}</td>
          <td class="px-3 py-2 text-center">{{ s.openTime }}</td>
          <td class="px-3 py-2 text-center">{{ s.closeTime }}</td>

          <!-- Dropdown tr·∫°ng th√°i -->
         <td>
  <select
    [(ngModel)]="s.status"
    (change)="changeStationStatus(s)"
    class="rounded-md px-3 py-1 font-medium text-center transition-colors duration-200 focus:outline-none"
    [ngClass]="{
      'bg-green-100 text-green-700 border border-green-300': s.status === 'Active',
      'bg-red-100 text-red-700 border border-red-300': s.status === 'Inactive',
      'bg-yellow-100 text-yellow-700 border border-yellow-300': s.status === 'Maintenance'
    }"
  >
    <option value="Active">Active</option>
    <option value="Inactive">Inactive</option>
    <option value="Maintenance">Maintenance</option>
  </select>
</td>



          <td class="px-3 py-2 text-center">{{ s.chargingPosts.length || 0 }}</td>

          <td class="px-3 py-2 text-center">
            <div class="flex justify-center gap-2">
              <button
                (click)="viewPosts(s)"
                class="flex items-center gap-1 px-2 py-1 bg-blue-500 text-white rounded-md text-xs font-medium hover:bg-blue-600 transition">
                <i class="fa fa-search"></i> Chi ti·∫øt
              </button>

              <button
                (click)="editStation(s)"
                class="flex items-center gap-1 px-2 py-1 bg-yellow-400 text-white rounded-md text-xs font-medium hover:bg-yellow-500 transition">
                <i class="fa fa-edit"></i> S·ª≠a
              </button>

              <button
                (click)="removeStation(s.id)"
                class="flex items-center gap-1 px-2 py-1 bg-red-500 text-white rounded-md text-xs font-medium hover:bg-red-600 transition">
                <i class="fa fa-trash"></i> X√≥a
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Edit Post -->
<div
  *ngIf="editingStation"
  class="fixed inset-0 bg-white/30 backdrop-blur-sm flex items-center justify-center z-50 transition-all duration-300"
>
  <div class="bg-white rounded-2xl shadow-2xl p-6 w-full max-w-3xl relative animate-fade-in border border-yellow-300">
    <div class="flex justify-between items-center mb-4 border-b pb-2">
      <h3 class="text-2xl font-semibold text-yellow-600">‚úèÔ∏è Ch·ªânh s·ª≠a tr·∫°m</h3>
      <button
        (click)="editingStation = null"
        class="text-gray-500 hover:text-red-600 text-2xl leading-none"
        title="ƒê√≥ng"
      >
        √ó
      </button>
    </div>

    <div class="grid md:grid-cols-3 gap-4">
      <input type="text" [(ngModel)]="editingStation.name" placeholder="T√™n tr·∫°m" class="input" />
      <input type="text" [(ngModel)]="editingStation.address" placeholder="ƒê·ªãa ch·ªâ" class="input" />
      <input type="number" [(ngModel)]="editingStation.latitude" placeholder="Vƒ© ƒë·ªô" class="input" />
      <input type="number" [(ngModel)]="editingStation.longtitude" placeholder="Kinh ƒë·ªô" class="input" />
      <input type="time" [(ngModel)]="editingStation.openTime" class="input" />
      <input type="time" [(ngModel)]="editingStation.closeTime" class="input" />
    </div>

    <textarea
      [(ngModel)]="editingStation.description"
      placeholder="M√¥ t·∫£ tr·∫°m..."
      class="w-full border border-gray-300 rounded-lg mt-4 p-2"
    ></textarea>

    <div class="text-right mt-6">
      <button
        (click)="updateStation()"
        class="px-5 py-2 bg-yellow-500 text-white rounded-lg font-semibold hover:bg-yellow-600 transition"
      >
         C·∫≠p nh·∫≠t
      </button>
      <button
        (click)="editingStation = null"
        class="px-5 py-2 bg-gray-400 text-white rounded-lg font-semibold hover:bg-gray-500 transition ml-2"
      >
         H·ªßy
      </button>
    </div>
  </div>
</div>



 <!-- üîç MODAL VIEW POSTS -->
<div
  *ngIf="viewingStation"
  class="fixed inset-0 bg-white/30 backdrop-blur-sm flex items-center justify-center z-50 transition-all duration-300"
>
  <div class="bg-white rounded-2xl shadow-2xl p-6 w-full max-w-3xl relative animate-fade-in border border-gray-200">
    <div class="flex justify-between items-center mb-4 border-b pb-2">
      <h2 class="text-2xl font-semibold text-blue-700">
         Tr·ª• s·∫°c c·ªßa tr·∫°m: {{ viewingStation.name }}
      </h2>
      <button
        (click)="viewingStation = null"
        class="text-gray-500 hover:text-red-600 text-2xl leading-none"
        title="ƒê√≥ng"
      >
        √ó
      </button>
    </div>

    <table class="min-w-full text-sm text-gray-700 border border-gray-200 rounded-lg overflow-hidden">
      <thead class="bg-gray-100">
        <tr>
          <th class="px-3 py-2 text-left">M√£ tr·ª•</th>
          <th class="px-3 py-2 text-left">Lo·∫°i</th>
          <th class="px-3 py-2 text-left">C√¥ng su·∫•t</th>
          <th class="px-3 py-2 text-left">Tr·∫°ng th√°i</th>
          <th class="px-3 py-2 text-center">Walk-in</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of viewingStation.chargingPosts" class="border-t hover:bg-gray-50">
          <td class="px-3 py-2">{{ p.code }}</td>
          <td class="px-3 py-2">{{ p.type }}</td>
          <td class="px-3 py-2">{{ p.powerKW }} kW</td>
          <td class="px-3 py-2 text-center">
            <select
              class="border rounded-md px-2 py-1 text-sm font-medium focus:ring-2 focus:ring-blue-400"
              [ngClass]="{
                'bg-green-100 text-green-700': p.status === 'Available',
                'bg-yellow-100 text-yellow-700': p.status === 'Occupied',
                'bg-gray-100 text-gray-700': p.status === 'Maintenance',
                'bg-red-100 text-red-700': p.status === 'Offline'
              }"
              [(ngModel)]="p.status"
              (change)="changePostStatus(p)"
            >
              <option value="Available">Available</option>
              <option value="Occupied">Occupied</option>
              <option value="Maintenance">Maintenance</option>
              <option value="Offline">Offline</option>
            </select>
          </td>
          <td class="text-center">
            <input type="checkbox" [checked]="p.isWalkIn" disabled />
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
</div>
