<div class="bg-white p-6 rounded-2xl shadow-md mt-6 border border-gray-200">
  <h2 class="text-2xl font-semibold text-gray-800 mb-5">
    Doanh thu
  </h2>

  <!-- Bộ lọc -->
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">

    <!-- Bộ lọc trạm + granularity -->
    <div class="flex flex-wrap items-center gap-4">

      <!-- Chọn trạm -->
      <div class="flex items-center gap-2">
        <label class="font-medium text-gray-700">Trạm:</label>
        <select [(ngModel)]="stationId"
                name="stationId"
                class="border border-gray-300 rounded-lg p-2 min-w-[150px]">
          <option [ngValue]="null">Tất cả trạm</option>
          <option *ngFor="let s of stations" [ngValue]="s.id">
            {{ s.name }}
          </option>
        </select>
      </div>

      <!-- granular -->
      <div class="flex items-center gap-2">
        <label class="font-medium text-gray-700">Thống kê:</label>
        <select [(ngModel)]="granularity"
                name="granularity"
                class="border border-gray-300 rounded-lg p-2 min-w-[150px]">
          <option value="Day">Theo ngày</option>
          <option value="Month">Theo tháng</option>
          <option value="Year">Theo năm</option>
        </select>
      </div>
    </div>

    <!-- Bộ lọc ngày -->
    <div class="flex items-center gap-3">
      <label class="font-medium text-gray-700">Từ ngày:</label>
      <input type="date"
             [(ngModel)]="startDate"
             name="startDate"
             class="border border-gray-300 rounded-lg p-2" />

      <label class="font-medium text-gray-700">Đến ngày:</label>
      <input type="date"
             [(ngModel)]="endDate"
             name="endDate"
             class="border border-gray-300 rounded-lg p-2" />
    </div>

    <button (click)="applyDateFilter()"
      class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
      Lọc
    </button>
  </div>

  <!-- Tổng doanh thu -->
  <div class="flex justify-between text-gray-700 mb-4">
    <p>
      <span class="font-medium">Tổng doanh thu:</span>
      <span class="text-blue-600 font-semibold text-lg">
        {{ totalRevenueSum | number: '1.0-0' }} VNĐ
      </span>
    </p>
  </div>

  <!-- Chart -->
  <canvas id="revenueChart" class="w-full h-80"></canvas>

  <!-- Pie chart -->
  <div class="bg-white p-6 rounded-2xl shadow-md mt-8 border border-gray-200 max-w-md mx-auto">
    <h2 class="text-xl font-semibold text-center mb-4">Cơ cấu doanh thu</h2>
    <div class="flex justify-center">
      <canvas id="revenuePie" class="w-[300px] h-[300px]"></canvas>
    </div>
  </div>
</div>
