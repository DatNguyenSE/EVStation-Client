<!-- Nền -->
<div
  class="absolute inset-0 bg-cover bg-center -z-10"
  style="background-image: url('/assets/background/nen-tram-sac-xe-dien.png'); filter: brightness(0.45) blur(4px);">
</div>

<!-- Container toàn trang -->
<div class="min-h-screen flex flex-col">

  <!-- Nội dung chính -->
  <main class="flex-1 flex flex-col items-center justify-start py-10 px-6">
    <div class="w-full max-w-6xl">

      <h2 class="text-3xl font-bold text-white text-center mb-10 drop-shadow-lg">
         Lịch sử giao dịch
      </h2>

      <!-- Nếu có lỗi -->
      <div *ngIf="message" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
        {{ message }}
      </div>

      <!-- Danh sách giao dịch -->
<div *ngIf="transaction?.length; else noData" class="flex flex-col gap-5 w-full max-w-5xl mx-auto">
  <div
    *ngFor="let t of transaction"
    class="w-full bg-white/90 backdrop-blur-sm border-l-4 shadow-sm rounded-xl p-5 flex flex-col sm:flex-row sm:justify-between sm:items-center transition-transform hover:scale-[1.01] hover:shadow-md"
    [ngClass]="{
      'border-l-green-500': t.status === 'Success',
      'border-l-yellow-400': t.status === 'Pending',
      'border-l-red-500': t.status === 'Failed',
      'border-l-gray-400': t.status === 'Canceled'
    }"
  >
    <!-- Phần thông tin chính -->
    <div>
      <h3 class="text-lg font-semibold text-gray-800 mb-1">{{ t.transactionType }}</h3>
      <p
        class="text-lg font-semibold mb-1 transition-transform duration-200"
        [ngClass]="{
          'text-green-600': t.transactionType === 'Topup',
          'text-red-600': t.transactionType !== 'Topup'
        }"
      >
        <span *ngIf="t.transactionType === 'Topup'">+</span>
        <span *ngIf="t.transactionType !== 'Topup'">−</span>
        {{ t.amount | currency:'VND':'symbol':'1.0-0' }}
      </p>

      <p class="text-sm text-gray-500">
        Số dư trước: {{ t.balanceBefore | currency:'VND':'symbol':'1.0-0' }}
      </p>
      <p class="text-sm text-gray-500">
        Số dư sau: {{ t.balanceAfter | currency:'VND':'symbol':'1.0-0' }}
      </p>
      <p class="text-sm italic text-gray-600 mt-2">
        {{ t.description || 'Không có mô tả' }}
      </p>
    </div>

    <!-- Phần trạng thái và thời gian -->
    <div class="text-right mt-3 sm:mt-0">
      <span
        class="inline-block px-3 py-1 rounded-full text-sm font-medium mb-2"
        [ngClass]="{
          'bg-green-200 text-green-800': t.status === 'Success',
          'bg-yellow-200 text-yellow-800': t.status === 'Pending',
          'bg-red-200 text-red-800': t.status === 'Failed',
          'bg-gray-200 text-gray-700': t.status === 'Canceled'
        }"
      >
        {{ t.status }}
      </span>
      <p class="text-xs text-gray-400">
        {{ t.createdAt | date:'dd/MM/yyyy HH:mm' }}
      </p>
    </div>
  </div>
</div>


      <!-- Không có dữ liệu -->
      <ng-template #noData>
        <div class="text-center text-gray-200 italic py-10 text-lg">
          Không có giao dịch nào để hiển thị.
        </div>
      </ng-template>

    </div>
  </main>


</div>
