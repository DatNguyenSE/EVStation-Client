<div class="min-h-screen bg-gray-50 font-sans flex flex-col">
  <div class="w-full max-w-6xl mx-auto px-4 py-10">
    <h2 class="text-2xl font-bold text-gray-800 mb-6">Lịch sử Giao dịch</h2>

    <div *ngIf="isLoading" class="text-center py-16 text-gray-500">
      <span class="loading loading-spinner loading-lg text-blue-500"></span>
      <p class="mt-2 text-lg">Đang tải...</p>
    </div>

    <div *ngIf="!isLoading && errorMessage" class="text-center text-red-500 py-16">
      {{ errorMessage }}
    </div>

    <div *ngIf="!isLoading && transactions.length === 0" class="text-center text-gray-500 py-16 bg-gray-50 rounded-xl">
      <i class="bi bi-inbox text-5xl text-gray-400 mb-4"></i>
      <h3 class="text-xl font-semibold text-gray-700">Không có giao dịch</h3>
      <p class="text-gray-500">Tất cả giao dịch của bạn sẽ xuất hiện ở đây.</p>
    </div>

    <div *ngIf="!isLoading && transactions.length > 0" class="bg-white rounded-xl shadow-sm border border-gray-100">
      <div class="overflow-x-auto">
        <table class="table w-full">
          <thead>
            <tr class="bg-gray-50">
              <th class="font-semibold text-gray-700">Loại</th>
              <th class="font-semibold text-gray-700 text-right">Số dư trước</th>
              <th class="font-semibold text-gray-700 text-right">Số tiền</th>
              <th class="font-semibold text-gray-700 text-right">Số dư sau</th>
              <th class="font-semibold text-gray-700">Mô tả</th>
              <th class="font-semibold text-gray-700">Ngày</th>
              <th class="font-semibold text-gray-700">Trạng thái</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let t of transactions" class="hover:bg-gray-50">
              <td>
                <span class="badge badge-sm font-semibold" [ngClass]="{
                    'bg-green-200 text-green-800':
                      t.transactionType === 'Topup' || t.transactionType === 'Refund',
                    'bg-red-200 text-red-800':
                      t.transactionType !== 'Topup' && t.transactionType !== 'Refund'
                  }">
                  {{ t.transactionType }}
                </span>
              </td>
              <td class="text-right text-gray-600">{{ t.balanceBefore | number }} ₫</td>
              <td class="text-right font-semibold" [ngClass]="
                  t.transactionType === 'Topup' || t.transactionType === 'Refund'
                    ? 'text-green-600'
                    : 'text-red-600'
                ">
                {{ t.transactionType === 'Topup' || t.transactionType === 'Refund' ? '+' : '-' }}
                {{ t.amount | number }} ₫
              </td>
              <td class="text-right font-bold text-gray-800">{{ t.balanceAfter | number }} ₫</td>
              <td class="text-gray-600">{{ t.description || '---' }}</td>
              <td class="text-gray-600">{{ t.createdAt | date : 'short' }}</td>
              <td>
                <span class="badge badge-sm font-semibold border" [ngClass]="{
    'bg-green-50 text-green-700 border-green-400': t.status === 'Completed',
    'bg-yellow-50 text-yellow-700 border-yellow-400': t.status === 'Pending',
    'bg-red-50 text-red-700 border-red-400': t.status === 'Failed'
  }">
                  {{ t.status }}
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div *ngIf="hasMultiplePages" class="w-full mt-auto">
    <div class="max-w-6xl mx-auto flex justify-center items-center py-6 px-4">
      <div class="join">
        <button class="join-item btn btn-sm" [disabled]="pageNumber === 1" (click)="prevPage()">
          «
        </button>
        <button class="join-item btn btn-sm">Trang {{ pageNumber }} / {{ meta.totalPages }}</button>
        <button class="join-item btn btn-sm" [disabled]="pageNumber === meta.totalPages" (click)="nextPage()">
          »
        </button>
      </div>
    </div>
  </div>
</div>